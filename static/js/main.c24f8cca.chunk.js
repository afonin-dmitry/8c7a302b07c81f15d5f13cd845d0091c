(this["webpackJsonphello-world"]=this["webpackJsonphello-world"]||[]).push([[0],{187:function(e,t,n){e.exports=n(344)},192:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(67),i=n.n(c),o=(n(192),n(51)),u=n(363),s=n(95),p=n(361),f=(n(176),n(89)),d=n.n(f),l=(n(9),n(174),n(177)),m=n.n(l),h=n(111),b=n.n(h),v=function(e){return r.createElement(p.a,{size:"large",color:"success",onClick:e.onClick},r.createElement(m.a,{fontSize:"large"}))},x=function(e){return r.createElement(p.a,{size:"large",color:"default",onClick:e.onClick},r.createElement(d.a,{fontSize:"large"}))},w=function(e){return r.createElement(p.a,{size:"large",color:"default",onClick:e.onClick,disabled:e.disabled},r.createElement(b.a,{fontSize:"large"}))},g=function(e){return r.createElement(u.a,{sx:{position:"fixed",bottom:0,left:0,right:0},style:{zIndex:10},elevation:5},r.createElement(s.a,{display:"flex",justifyContent:"center",alignItems:"center"},e.recording?r.createElement(x,{onClick:e.onPause}):r.createElement(v,{onClick:e.onStart}),r.createElement(w,{disabled:!e.recording,onClick:e.onPause})))},k=n(1),j=n.n(k),O=n(36),y=n(21),E=n(90),S=j.a.mark(R),C=j.a.mark(D),P=j.a.mark(T),U=j.a.mark(q),z=j.a.mark(I),L=Object(O.b)("initEditorState"),M=Object(O.c)({name:"editor",initialState:{editorState:E.EditorState.createEmpty(),uploaded:!0},reducers:{updateEditorState:function(e,t){e.editorState=t.payload},uploaded:function(e,t){e.uploaded=t.payload},upd:function(e,t){console.log(t)}}});function R(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.a)((function(){console.log(e)}));case 2:return t.next=4,Object(y.c)(B(!0));case 4:case"end":return t.stop()}}),S)}function D(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.c)(B(!1));case 2:case"end":return e.stop()}}),C)}function T(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(J,D);case 2:return e.next=4,Object(y.b)(1e3,J,R);case 4:case"end":return e.stop()}}),P)}function q(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.a)((function(){console.log(e)}));case 2:return t.next=4,Object(y.c)(A(14));case 4:case"end":return t.stop()}}),U)}function I(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(L,q);case 2:case"end":return e.stop()}}),z)}var F=M.reducer,G=M.actions,J=G.updateEditorState,A=G.upd,B=G.uploaded,H=function(e){return e.editor.editorState},K=j.a.mark(Z),N=Object(O.c)({name:"player",initialState:{playing:!1,played:0},reducers:{play:function(e){e.playing=!0},pause:function(e){e.playing=!1},seek:function(e,t){e.played=t.payload}},extraReducers:function(e){e.addCase(J,(function(e,t){}))}}),Q=N.reducer,V=N.actions,W=(V.play,V.pause,V.seek),X=function(e){return e.player.playing},Y=function(e){return e.player.played};function Z(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),K)}var $=n(94),_=n(4),ee=n(7),te=n(8),ne=n(115),re=n(180),ae=function(){function e(){Object(ee.a)(this,e),this.stream=null;var t=navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;if(!t)throw new Error("getUserMedia is not available on this page");this.getUserMedia=t.bind(navigator)}return Object(te.a)(e,[{key:"init",value:function(){var e=Object(_.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkPermissions();case 2:if(e.sent){e.next=5;break}return e.next=5,this.requestPermissions();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkPermissions",value:function(){var e=Object(_.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.permissions){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,navigator.permissions.query({name:"microphone"});case 4:if("granted"!==(t=e.sent).state){e.next=7;break}return e.abrupt("return",!0);case 7:if("prompt"!==t.state){e.next=9;break}return e.abrupt("return",!1);case 9:throw new Error("Permissions denied");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"requestPermissions",value:function(){var e=Object(_.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startStream();case 2:this.stopStream();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startStream",value:function(){var e=Object(_.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return e.abrupt("return",this.stream=e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopStream",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()})),this.stream=null}}]),e}(),ce=new(function(){function e(){Object(ee.a)(this,e),this.microphone=new ae,this.recorder=null,this.inited=!1}return Object(te.a)(e,[{key:"init",value:function(){var e=Object(_.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:return this.inited=!0,e.next=5,this.microphone.init();case 5:return e.t0=ne.b,e.next=8,Object(re.a)();case 8:return e.t1=e.sent,e.next=11,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(_.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.microphone.startStream();case 2:r=e.sent,this.recorder=new ne.a(r,{mimeType:"audio/wav"}),this.recorder.ondataavailable=t,this.recorder.start(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.recorder.stop(),this.recorder=null,this.microphone.stopStream()}}]),e}()),ie=j.a.mark(he),oe=j.a.mark(be),ue=j.a.mark(ve),se=j.a.mark(xe),pe=j.a.mark(we),fe=j.a.mark(ge),de=j.a.mark(ke),le=Object(O.c)({name:"recorder",initialState:{recording:!1,init:!1},reducers:{startRecording:function(e){e.recording=!0},stopRecording:function(e){e.recording=!1},initRecorder:function(e){e.init=!0,console.log("init")}}}),me=Object($.a)();function he(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(ce.init.bind(ce));case 2:case"end":return e.stop()}}),ie)}function be(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(Se,he);case 2:case"end":return e.stop()}}),oe)}function ve(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(ce.start.bind(ce),(function(e){return me.put({type:"UPLOAD",payload:e.data})}),1e4);case 2:case"end":return e.stop()}}),ue)}function xe(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(ye,ve);case 2:case"end":return e.stop()}}),se)}function we(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),pe)}function ge(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(Ee,we);case 2:case"end":return e.stop()}}),fe)}function ke(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(y.d)(me);case 3:e.sent,e.next=0;break;case 6:case"end":return e.stop()}}),de)}var je=le.reducer,Oe=le.actions,ye=Oe.startRecording,Ee=Oe.stopRecording,Se=Oe.initRecorder,Ce=function(e){return e.recorder.recording},Pe=(n(321),function(e){var t=e.editorState,n=e.onUpdateEditorState,c=e.onLoad;return Object(r.useEffect)((function(){return c()}),[]),a.a.createElement(u.a,{sx:{height:"100vh",px:"5vw",pt:"50px",mx:"10vw"},elevation:5},a.a.createElement(E.Editor,{editorState:t,onChange:n,onFocus:function(e){return console.log(e)}}))}),Ue=function(){var e=Object(o.c)(X),t=Object(o.c)(Y),n=Object(o.c)(Ce),c=Object(o.b)();return Object(r.useEffect)((function(){return c(Se())}),[]),a.a.createElement("div",null,a.a.createElement(Pe,{editorState:Object(o.c)(H),onUpdateEditorState:function(e){return c(J(e))},onLoad:function(e){return c(L(e))}}),a.a.createElement(g,{played:t,playing:e,recording:n,onStart:function(){return c(ye())},onPause:function(){return c(Ee())},onProgress:function(e){return c(W(e))}}))},ze=function(){return r.createElement(Ue,null)},Le=n(181),Me="http://192.168.0.105",Re=n(58),De=n.n(Re),Te=function(){var e=Object(_.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(Me,"/api/v1/audio/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(_.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(Me,"/api/v1/audio/").concat(t,"/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(_.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(Me,"/api/v1/audio/").concat(t,"/text/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(_.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(Me,"/api/v1/audio/").concat(t,"/document/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(_.a)(j.a.mark((function e(t){var n,r,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],(r=new FormData).append("audio",t),r.append("isRussianLanguage",!0),r.append("isLast",n),e.next=7,De.a.post("".concat(Me,"/api/v1/audio/"),r,{headers:{"Content-Type":"multipart/form-data"}});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je={getList:Te,get:qe,getText:Ie,getDocument:Fe,create:Ge},Ae=j.a.mark(Ne),Be=j.a.mark(Qe),He=Object(O.b)("initList"),Ke=Object(O.c)({name:"list",initialState:{data:[]},reducers:{initData:function(e,t){e.data=t.payload,console.log(t.payload)}}});function Ne(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.a)(Je.getList);case 2:return e=t.sent,t.next=5,Object(y.c)(We(e));case 5:case"end":return t.stop()}}),Ae)}function Qe(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(He,Ne);case 2:case"end":return e.stop()}}),Be)}var Ve=Ke.reducer,We=Ke.actions.initData,Xe=Object($.b)(),Ye=Object(O.a)({reducer:{editor:F,player:Q,recorder:je,list:Ve},middleware:function(e){return e({serializableCheck:!1}).concat(Xe)}});Xe.run(Z),Xe.run(T),Xe.run(I),Xe.run(be),Xe.run(xe),Xe.run(ge),Xe.run(ke),Xe.run(Qe),i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,{store:Ye},a.a.createElement(Le.a,null,a.a.createElement(ze,null)))),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.c24f8cca.chunk.js.map